<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link
    href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@100;200;300;700&family=Barlow:wght@200;300;400;700;800&display=swap"
    rel="stylesheet">
    <link rel="stylesheet" href="app/app.css?v=2.5" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <!-- aos.css -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--Newsletter-->
    <link rel="stylesheet" href="app/newsletter.css" />

    <link rel="stylesheet" href="app/Carousel.css" />


    <script type="text/javascript" src="app/newsletter.js"></script>
    <script type="text/javascript" src="app/include.js"></script>
   
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K0N0NFB1B5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-K0N0NFB1B5');
  </script>
  <script>
  $(document).ready(function () { 
    $("#myModal").modal("show")
  });
    </script>


    <title>FIC Los Cabos</title>


    <link rel="stylesheet" href="app/lbii.css">

     


  </head>
  <body>
<header id="divmenu" class="inclusion" data-file="header.html" ></header>

  <!-- ##################################################################################################################################################################################################################-->
  <!-- Fondo Fílmico -->
  <!-- ##########################-->

  <section class="text-center mb-5 w-100 thebannerfull" style="padding:0; margin:0;">
    <img src="images/labajainspira-itinerante/2024/banner.png" alt="La Baja Inspira Itinerante" class="w-100">

  </section>

  <section class="container mb-5">
    <p class="h4" style="text-align: justify;">La Baja Inspira surgió en el Festival Internacional de Cine de Los Cabos como una sección para visibilizar e impulsar el talento de cineastas de la región y la diversidad y riqueza de sus paisajes.</p>
    <p class="h4 p-5 my-5 text-white" style="background: #01a7ce; text-align: justify;">Más tarde, en el 2023, nace <strong>La Baja Inspira Itinerante</strong>, una muestra fílmica que recorre parte de la Península de Baja California mediante proyecciones completamente gratuitas en espacios públicos y  escolares.</p>
    <p class="h4"  style="text-align: justify;">Este ciclo, que se llevará a cabo por segunda vez consecutiva, este año de junio a noviembre, busca que la cinematografía de Baja California Sur y Baja California  pueda ser entendida como un mapa a través del cual podamos navegar sus historias, personajes y escenarios que den voz a nuevas perspectivas.</p>
  </section>


  



  <div id="lbii-app">
    
    <section class="container sectionprogram" style="margin-bottom: 60px; " v-cloak>

      <div class="lbii-title mx-auto">
        CONOCE LA PROGRAMACIÓN
      </div>

      <!--features-->

      <div class="row mt-5 gx-1 gy-1" >
        <template v-for="(item, index) in films" >
          <div class="col-md-3 lbii-films"  v-if="item.type=='feature'">
            <div class="lbiibox-component" @click="openLink('film',item.id, item.film.name, $event)">
              <div class="lbiibox-title">{{item.film.name}}</div>
              <div class="lbiibox-image" :style="'background-image: url(images/labajainspira-itinerante/2024/films/'+item.gallery[0]+');'"></div>

                <div class="p-2 lbiibox-information">
                  <div class="h6" style="margin-bottom: 0;">Dirección: <strong>{{item.film.director}}</strong></div>
                  <div>{{item.film.country}} / {{item.film.year}}</div>
                </div>

              <div class="px-2 pb-3">
                <div class="lbiibox-btn" style="margin-top: auto;">CONSULTAR FUNCIONES</div>
              </div>
            </div>
          </div>
        </template>
        <!--PROGRAMA DE CORTOS-->
        <div class="col-md-3 lbii-films">
          <div class="lbiibox-component" @click="openLink('film', (Math.floor(Math.random() * 3) + 4), 'Programa de cortometrajes', $event)">
            <div class="lbiibox-title">PROGRAMA DE CORTOMETRAJES</div>
            <div class="lbiibox-image" :style="'background-image: url(images/labajainspira-itinerante/2024/films/cortos.jpg); '"></div>
            <div class="p2 lbiibox-information"></div>
            <div class="px-2 pb-3" style="margin-top: auto;">
              <div class="lbiibox-btn">CONSULTAR FUNCIONES</div>
            </div>
          </div>
        </div>
        <!--/programacortos-->
      </div>
      <div class="text-center p-5">
        <a href="#" target="_blank" class="lbiibox-btn downloadprogram">DESCARGA LA PROGRAMACIÓN</a>
      </div>
    </section>



    

    <section class="container sectionvenues" v-cloak>
      <div class="lbii-title mx-auto">
        CONOCE LAS SEDES
      </div>
      <div class="row mt-5 g-1" >
        <div class="col-md-3 col-sm-4 mt-5" v-for="(item, index) in venues" :key="index" >
          <div class="lbiibox-component" @click="openLink('venue',item.id, item.name)">
            <div class="lbiibox-inner lbii-source" :style="'background-image: url(images/labajainspira-itinerante/2024/sedes/'+item.imageName+')'">
              <div class="lbiibox-icon"><img src="images/labajainspira-itinerante/2024/sedes/marker.svg"></div>
              <div class="p-1 pb-2">
                <div class="lbiibox-btn">{{item.name}}</div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>




    <section class="flogos container">
      <img src="images/labajainspira-itinerante/2024/logos/logos-gray.svg" alt="TENDENCIA"  class="w-100">
    </section>
    <!--<section class="">
      <div class="lbii-flogos">
        <img src="images/labajainspira-itinerante/2024/logos/focine.svg" alt="CULTURA IMCINE FOCINE">
        <img src="images/labajainspira-itinerante/2024/logos/cps.svg" alt="CPS MEDIA">
        <img src="images/labajainspira-itinerante/2024/logos/tvmar.svg" alt="TVMAR">
        <img src="images/labajainspira-itinerante/2024/logos/radiantefm.svg" alt="RADIANTEFM">
        <img src="images/labajainspira-itinerante/2024/logos/tribuna.svg" alt="TRIBUNA">
        <img src="images/labajainspira-itinerante/2024/logos/tendencia.svg" alt="TENDENCIA" >
      </div>
    </section>-->



    <!-- POP UPS -->



    <div class="lbii-pop" v-if="activeFilm || activeVenue" v-cloak>
      <!-- ACTIVE FILM -->
      <div class="lbiipop-inner lbii-pop-film" v-if="activeFilm">
          <!-- HEADER -->
          
          <div class="lbiipop-close" @click="closePop"><i class="fa fa-times"></i></div>
          <!--
            <div class="lbii-title" style="margin-top: -20px;">{{activeFilm.film.name}}</div>
          -->
          
          <!-- CONTENT WITH SCROLL-->
          <div class="container h-100 overflow-auto">
            
            
            
            <div class="row mt-5">
              <!-- GALLERY -->


              <div class="col-md-6">
                <div class="lbii-title-internal mb-1" style="margin-top: -20px;">{{activeFilm.film.name}}</div>
                <div class="lbiipop-image lbii-target" :style="'background-image: url(images/labajainspira-itinerante/2024/films/'+activeFilmPhoto+')'"></div>

                <div class="row justify-content-center align-items-center gap-1 mt-1">
                  <template v-for="(item, index) in activeFilm.gallery">
                    <div class="col" @click="activeFilmPhoto = item">
                      <div class="lbiipop-image-galleryitem" :class="activeFilmPhoto == item ? 'active':''" :style="'background-image: url(images/labajainspira-itinerante/2024/films/'+item+')'"></div>
                    </div>
                  </template>
                </div>
              </div>

              <!-- MOVIE INFORMATIONS -->

              <div class="col-md-6 lbiipop-infoboxes">
                <div class="lbiipop-infobox" v-if="activeFilm.film.country">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/country.png"></div>
                  <div class="lbiipop-info"><div><strong>País:</strong> {{activeFilm.film.country}} </div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.year">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/year.png"></div>
                  <div class="lbiipop-info"><div><strong>Año:</strong> {{activeFilm.film.year}} </div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.director">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/director.png"></div>
                  <div class="lbiipop-info"><div><strong>Director:</strong> {{activeFilm.film.director}}</div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.script">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/script.png"></div>
                  <div class="lbiipop-info"><div><strong>Guión:</strong> {{activeFilm.film.script}}</div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.photo">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/photo.png"></div>
                  <div class="lbiipop-info"><div><strong>Fotografía:</strong> {{activeFilm.film.photo}}</div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.duration">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/duration.png"></div>
                  <div class="lbiipop-info"><div><strong>Duración:</strong> {{activeFilm.film.duration}} <span>minutos</span></div></div>
                </div>
                <div class="lbiipop-infobox" v-if="activeFilm.film.trailer">
                  <div class="lbiipop-ico"><img src="images/labajainspira-itinerante/2024/ico/trailer.png"></div>
                  <div class="lbiipop-info"><div><strong>Trailer:</strong> <a class="lbii-vertrailer" target="_blank" :href="activeFilm.film.trailer">Ver trailer</a></div></div>
                </div>
              </div>

            </div><!-- /.row-->



            <div class="row mt-5" >
              <div class="col-md-6" >
                <div style="top:20px; position: sticky;" class="mb-5">
                <div class="h3" style="color:#1fa58b;"><strong>SINOPSIS</strong></div>
                <p>{{activeFilm.film.synopsis}}</p>



                   <!-- IF SHORT -->

                <div class="mt-5" v-if="activeFilm.type == 'short'">
                  <div style="background: #1fa58b; color:#fff; padding: 10px;">
                    <div class="text-center">
                      <div class="lbii-title mx-auto lbii-shorts-title">PROGRAMA DE CORTOMETRAJES</div>
                      <div>3 CORTOMETRAJES EN UNA MISMA FUNCIÓN</div>
                    </div>
                    <div class="row mt-3">
                      <template v-for="(item, index) in films" >

                        <div class="col-md-4 lbiibox-component cursor-pointer"  v-if="item.type=='short'"   @click="openLink('film',item.id, item.film.name, $event)">
                          <div class="lbiibox-image" style=" aspect-ratio: 16/9; background-size:cover;" :style="'background-image: url(images/labajainspira-itinerante/2024/films/'+item.gallery[0]+')'"></div>
                          <div class="h6 p-1 text-center">
                            {{item.film.name}}
                          </div>
                        </div>
                      </template>
                    </div>
                  </div>
                </div>
                <!-- / IF SHORT-->


              </div>
               
              </div><!-- /sinopsis-->



              <div class="col-md-6">

                
                
                <!-- FUNCIONES -->
                <div class="lbii-screenbyvenue">
                  <div class="d-flex justify-content-between">
                    <div class="h3" style="color:#1fa58b;"> <strong style="text-transform: uppercase;">CARTELERA</strong></div>
                    <div><div class="lbii-entradalibre" style="margin-left:auto;">FUNCIONES GRATUITAS</div></div>
                  </div>
                  <!--MONTHS-->
                  <template v-for="(item, index) in getScreeningsByFilmId(activeFilm.id)">
                      <div class="my-4">
                        <div class="h4" style="color:#1fa58b;"> <strong style="text-transform: uppercase;">FUNCIONES {{item.month_es}}</strong></div>
                        <!--FILMS-->
                        <template v-for="(film, indexF) in item.films">
                          <div class="mb-3">
                            <div class="h6 p-1" style="color: #fff; background-color: #1fa58b;"><strong>{{film.venueName}}</strong></div>
                            <div class="text-capitalize"> {{film.day_es}} de {{item.month_es}} | {{film.time}} </div>
                          </div>
                        </template>

                      </div>
                  </template>


                  
                </div> <!--lbii-screenbyvenue-->



              </div>
            </div>
            

         
            </div>



        </div>

        <div class="lbiipop-inner lbii-pop-venue" v-if="activeVenue">

            <div class="row h-100 g-0">
              <div class="col-md-6 lbii-innervenueimg" :style="'background-image: url(images/labajainspira-itinerante/2024/sedes/'+activeVenue.imageName+')'">
                
              </div>
              <div class="col-md-6 h-100">
                <div class="h-100 d-flex flex-column justify-content-between p-3">
                  <div class="d-flex w-100">
                    <div class="lbiipop-close" @click="closePop"><i class="fa fa-times"></i></div>
                  </div>
                  <div class="text-center h4 my-3 text-uppercase"><strong>{{activeVenue.name}}</strong></div>
                  <div class="my-1 h5 lbii-venuedescription" v-html="activeVenue.description"></div>
                  <div class="mt-5 lbii-footer-venue">
                    <div class="lbiibox-iconfoot"><img src="images/labajainspira-itinerante/2024/sedes/marker.svg"></div>
                    <p>{{activeVenue.address}}</p>
                    <div class="text-center p-2">
                      <a class="lcii-gmapslink" target="_blank" :href="activeVenue.googleMapsLink">
                        <iconify-icon icon="ph:map-trifold-duotone" height="32"></iconify-icon>
                        Abrir en Google Maps</a>
                    </div>
                  </div>
                </div>

            </div>
          </div>
          

        </div>

          

    </div>



  </div> <!-- / #lbii-app-->



  <!-- ##################################################################################################################################################################################################################-->


    <footer id="divfooter" class="inclusion" data-file="footer.html" ></footer>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/iconify-icon@2.1.0/dist/iconify-icon.min.js"></script>
    

<!-- aos.js -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script src="https://vjs.zencdn.net/8.0.4/video.min.js"></script>


<script>
  AOS.init();
</script>

<!--/aos.js-->
<!--ediciones-->
<script src="https://news.loscabosiff.org/loscabos-components.js?v=2"></script>
<!--/ediciones-->

<script src="app/app.js?v=1.5"></script>




<!-- <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/vue@3.4.26/dist/vue.global.min.js"></script>

<script src="app/lbii.js"></script>
<script>
  const { createApp, ref } = Vue

  createApp({
    setup() {

      const currentscreeninglist = lbii_currentscreeninglist



      const films = lbii_films
      const venues = lbii_venues
      const screenings = lbii_screenings

      const activeFilm = ref(null)
      const activeFilmPhoto = ref(null)
      const activeVenue = ref(null)


      const monthNames_es = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
      const monthNames_en = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      function getScreeningsByFilmId(filmId) {
          const filmScreenings = screenings
              .filter(screening => screening.filmId === filmId)
              .sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime));

          const screeningsByMonth = {};

          filmScreenings.forEach(screening => {
              const date = new Date(screening.dateTime);
              const month = date.getMonth();
              const year = date.getFullYear();
              const monthKey = `${year}-${month}`;

              if (!screeningsByMonth[monthKey]) {
                  screeningsByMonth[monthKey] = {
                      month_es: monthNames_es[month],
                      month_en: monthNames_en[month],
                      films: []
                  };
              }

              const venue = venues.find(venue => venue.id === screening.venueId);
              
              const day_es = `${date.toLocaleDateString('es-ES', { weekday: 'long' })} ${date.getDate()}`;
              const day_en = `${date.toLocaleDateString('en-US', { weekday: 'long' })} ${date.getDate()}`;

              const hours = date.getHours().toString().padStart(2, '0');
              const minutes = date.getMinutes().toString().padStart(2, '0');
              const time = `${hours}:${minutes}`;

              screeningsByMonth[monthKey].films.push({
                  filmId: screening.filmId,
                  venueId: screening.venueId,
                  venueName: venue.name,
                  dateTime: screening.dateTime,
                  time: time,
                  day_es,
                  day_en
              });
          });

          return Object.values(screeningsByMonth).map(monthEntry => ({
              month_es: monthEntry.month_es,
              month_en: monthEntry.month_en,
              films: monthEntry.films
          }));
      }




      const filterScreeningsByFilmAndMonth = (filmId, month) => {
        var filteredScreenings = screenings.filter(function(screening) {
          return screening.filmId === filmId && new Date(screening.dateTime).getMonth() + 1 === month;
        });
        var screeningsWithInfo = filteredScreenings.map(function(screening) {
            var film = films.find(function(film) {
                return film.id === screening.filmId;
            });
            var venue = venues.find(function(venue) {
                return venue.id === screening.venueId;
            });
            var screeningDate = new Date(screening.dateTime);
            var dayNameSpanish = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'][screeningDate.getDay()];
            var dayNameEnglish = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][screeningDate.getDay()];
            var day = screeningDate.getDay()
            var hours = screeningDate.getHours();
            var minutes = screeningDate.getMinutes();
            var time = hours.toString().padStart(2, '0') + ':' + minutes.toString().padStart(2, '0');

            return { ...screening, film: film, venue: venue, dayNameSpanish: dayNameSpanish, dayNameEnglish: dayNameEnglish,day, time: time };
        });

        return screeningsWithInfo;
    }


      const parseHash = (hash) => {
        const pattern = /^#(film|venue)-(\d+)\/(.+)$/;
        const match = hash.match(pattern);
        return match ? { type: match[1], id: match[2], name: match[3] } : null;
      }

      const handleHashChange = () => {
        const hashInfo = parseHash(window.location.hash);
        if (hashInfo) {
            const { type, id } = hashInfo;
            const targetArray = type === 'film' ? films : venues;
            
            const item = targetArray.find(item => item.id === parseInt(id));
            if (item) {
                type === 'film' ? (activeFilm.value = item, activeFilmPhoto.value = item.gallery[0], activeVenue.value = null) : (activeVenue.value = item, activeFilm.value = null);
              } else {
                console.log("Item not found in the array.");
            }
        } else {
            console.log("Invalid hash.");
        }
      }


      const slugify = (name) => {
        return name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
      }



      const openLink = (type, id, name, $event) => {
        closePop()
        setTimeout(()=>{
          location.hash = type+'-'+id+'/'+slugify(name)
        }, 200)
      }
      const closePop = () => {
        //window.location.href.split('#')[0]
        history.pushState(null,null,'#');
        activeFilm.value = null
        activeVenue.value = null
      }


      


      handleHashChange();
      //window.onhashchange = handleHashChange;
      window.addEventListener('hashchange', handleHashChange)

      return {
        films,
        venues,
        screenings,
        openLink: openLink,
        activeFilm: activeFilm,
        activeFilmPhoto: activeFilmPhoto,
        activeVenue: activeVenue,
        filterScreeningsByFilmAndMonth,
        closePop,
        currentscreeninglist,
        getScreeningsByFilmId
      }
    }
  }).mount('#lbii-app')
</script>



</body>
</html>